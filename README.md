# Async Utilities for the Twitter/Finagle ecosystem

[![Dwolla/async-utils-twitter CI](https://github.com/Dwolla/async-utils-twitter/actions/workflows/ci.yml/badge.svg)](https://github.com/Dwolla/async-utils-twitter/actions)
[![license](https://img.shields.io/github/license/Dwolla/async-utils-twitter.svg)](https://github.com/Dwolla/async-utils-twitter/blob/main/LICENSE.txt)
[![GitHub release (latest SemVer)](https://img.shields.io/github/v/release/dwolla/async-utils-twitter)](https://github.com/Dwolla/async-utils-twitter/releases)

This library implements the [`AsyncFunctorK` typeclass](https://github.com/Dwolla/async-utils/blob/d303f6eb1a0de41c810913c62d64bace6aeaadad/core/shared/src/main/scala/com/dwolla/util/async/AsyncFunctorK.scala#L7) from our [Async Utils library](https://github.com/Dwolla/async-utils) for [Twitter Futures](https://github.com/twitter/util/blob/f75a6f7ed47b95f6eb6d54d65886237104f8d9e2/util-core/src/main/scala/com/twitter/util/Future.scala#L1). It also contains scalafix rules to rewrite the code output by Scrooge to re-introduce higher-kinded types into the generated code (see [twitter/scrooge#352](https://github.com/twitter/scrooge/issues/352) for more background), and convenience wrappers for starting Finagle Thrift clients and servers, either with or without [Natchez tracing](https://github.com/tpolecat/natchez) integration.

See the [async-utils README](https://github.com/Dwolla/async-utils) for more background on why `AsyncFunctorK` exists and how it works.


## Artifacts

The Group ID for each artifact is `"com.dwolla"`. All artifacts are published to Maven Central.

<table>
<thead>
<tr>
<th>Artifact</th>
<th>Description</th>
<th align="center">Scala 2.13</th>
<th align="center">Scala 2.12</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>"async-utils-twitter"</code></td>
<td>Implementation for Twitter <code>Future</code></td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
</tr>
<tr>
<td><code>"async-utils-finagle"</code></td>
<td>Safely create Thrift clients and servers using cats-effect as the effect type</td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
</tr>
<tr>
<td><code>"async-utils-finagle-natchez"</code></td>
<td>Bridge between Natchez tracing and Finagle's built-in Zipkin support</td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
</tr>
<tr>
<td><code>"finagle-tagless-scalafix"</code></td>
<td>Automatically adds implicit instances needed by `asyncMapK` to the companion objects of Finagle services generated by Scrooge</td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
<td align="center"><g-emoji class="g-emoji" alias="white_check_mark" fallback-src="https://github.githubassets.com/images/icons/emoji/unicode/2705.png">✅</g-emoji></td>
</tr>
</tbody>
</table>

## Credits

Thanks to [Georgi Krastev and the cats-tagless project](https://github.com/typelevel/cats-tagless/pull/250/files) for the idea to use `ReaderT` in this way.
